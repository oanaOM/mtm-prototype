(function(t){function e(e){for(var n,i,o=e[0],l=e[1],c=e[2],f=0,u=[];f<o.length;f++)i=o[f],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(u.length)u.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/mtm-prototype/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"47c4":function(t,e,a){},"4a82":function(t,e,a){"use strict";var n=a("d26a"),r=a.n(n);r.a},"4c29":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Toolbar",{attrs:{personaName:t.profileData.details}}),a("Persona",{attrs:{profileData:t.profileData}})],1)},s=[],i=a("5530"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("div",{staticClass:"persona-info"},[a("i",{staticClass:"far fa-user"}),a("label",[t._v("Persona")]),a("input",{attrs:{model:t.personaName.name,type:"text"},domProps:{value:t.personaName.name},on:{keyup:t.editName}}),a("button",{staticClass:"far fa-edit"})]),a("div",{staticClass:"toolbar"},t._l(t.tools,(function(e){return a("div",{key:e.name,staticClass:"toolbar-link"},[a("button",{on:{click:t.updatePersonaProfile}},[a("i",{class:e.fontAwesomIcon})]),a("div",[t._v(t._s(e.name))])])})),0)])},l=[],c=(a("b0c0"),a("2f62")),d=(a("7db0"),a("4160"),a("c975"),a("a434"),a("159b"),a("96cf"),a("1da1")),f=a("bc3a"),u=a.n(f),p=1,m={details:{},columns:[],fields:[]},v={UPDATE_PERSONA_DETAILS:function(t,e){t.details=e},UPDATE_PERSONA_COLUMNS:function(t,e){t.columns.push(e)},UPDATE_PERSONA_FIELDS:function(t,e){t.fields.push(e)},UPDATE_FIELD_DATA:function(t,e){var a=t.fields.find((function(t){return t.id==e.id})),n=a.data;t.fields[t.fields.indexOf(a)].data=e.data,console.log("Field ID ",a.id," has been updated with data",e.data,". Preview data: ",n)},UPDATE_INITIAL_NAME:function(t,e){t.details.name=e},UPDATE_INITIAL_SHORTNAME:function(t,e){t.details.initials=e},DELETE_FIELD:function(t,e){var a=t.fields.find((function(t){return t.id==e.id}));t.fields.splice(t.fields.indexOf(a),1)}},_={getPersonaData:function(t){return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.prev=1,e.next=4,u.a.get("https://private-anon-49c551c5b7-smaplypersonastest.apiary-mock.com/personas/".concat(p));case 4:return n=e.sent,e.next=7,u.a.get("https://private-anon-9e76616a96-smaplypersonastest.apiary-mock.com/personas/".concat(p,"/columns"));case 7:return r=e.sent,e.next=10,u.a.get("https://private-anon-9e76616a96-smaplypersonastest.apiary-mock.com/personas/".concat(p,"/fields"));case 10:s=e.sent,a("UPDATE_PERSONA_DETAILS",n.data),r.data.forEach((function(t){return a("UPDATE_PERSONA_COLUMNS",t)})),s.data.forEach((function(t){return a("UPDATE_PERSONA_FIELDS",t)})),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](1),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))()},addField:function(t,e){var a=t.commit;a("UPDATE_PERSONA_FIELDS",e),console.log("Total fields ",m.fields)},updateFieldData:function(t,e){var a=t.commit;a("UPDATE_FIELD_DATA",e)},deleteField:function(t,e){var a=t.commit;a("DELETE_FIELD",e),console.log("DELTE FIELDS",e)},updateProfileDetails:function(t,e){var a=t.commit;a("UPDATE_INITIAL_NAME",e.name),a("UPDATE_INITIAL_SHORTNAME",e.initials),console.log("Persona name and shortname has been updated: ",e)}},h={profileData:function(t){return t}},g={state:m,mutations:v,actions:_,getters:h},b=g;n["a"].use(c["a"]);var y=new c["a"].Store({modules:{profile:b}}),D=function(t){var e=t.target.value,a=e.substring(0,3).toUpperCase(),n={name:"persona-initial"==t.target.id?y.getters.profileData.details.name:e,initials:a};t.target.style.backgroundColor=0===e.length?"red":"inherit",console.log(t),y.dispatch("updateProfileDetails",n)},E={props:["personaName"],data:function(){return{tools:[{fontAwesomIcon:"far fa-save",name:"Save persona"},{fontAwesomIcon:"fas fa-plus-square",name:"Add element"},{fontAwesomIcon:"far fa-file",name:"Export"},{fontAwesomIcon:"far fa-copy",name:"Duplicate"},{fontAwesomIcon:"fas fa-arrow-right",name:"Move"},{fontAwesomIcon:"fas fa-question-circle",name:"Help"},{fontAwesomIcon:"fas fa-ellipsis-h",name:"More actions"}]}},computed:{},methods:{editName:function(t){t.target.style.backgroundColor=0===t.target.value.length?"red":"inherit",t.target.style.width=t.target.value.length+"ch",D(t)},updatePersonaProfile:function(){}}},A=E,P=(a("6807"),a("2877")),C=Object(P["a"])(A,o,l,!1,null,"fcb6264c",null),T=C.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"container"},[a("div",{staticClass:"profile"},[a("div",{staticClass:"profile-header"},[a("div",{staticClass:"persona-icon",style:{backgroundColor:t.profileData.details.color}},[a("i",{staticClass:"fas fa-user-astronaut",staticStyle:{"font-size":"2rem","padding-top":"10px"}})]),a("div",{staticClass:"persona-name"},[a("label",{staticClass:"persona-label",attrs:{for:"persona_name"}},[t._v("Persona name ")]),a("input",{staticClass:"persona-input",attrs:{id:"persona_name"},domProps:{value:t.profileData.details.name},on:{keyup:t.onEditName}})]),a("div",{staticClass:"persona-shortname"},[a("label",{staticClass:"persona-label",attrs:{for:"persona-initial"}},[t._v("Short name ")]),a("input",{staticClass:"persona-input",attrs:{id:"persona-initial"},domProps:{value:t.profileData.details.initials},on:{keyup:t.onEditName}})])]),a("div",{staticClass:"boards"},t._l(t.profileData.columns,(function(e){return a("Board",{key:e.id,class:e.width,attrs:{board_id:e.id,fields:t.profileData.fields}})})),1)]),a("Elements")],1)},I=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"board",on:{drop:function(e){return t.onDrop(e,t.$props.board_id)},dragover:function(t){t.preventDefault()},dragenter:function(t){t.preventDefault()}}},t._l(t.fieldsArray,(function(e){return a("Field",{key:e.id,attrs:{id:e.id,field:e,parentBoard:t.$props.board_id,type:e.field_type,draggable:""},on:{dragstart:function(a){return t.startDrag(a,e)}}},[a("label",{staticClass:"field-label"},[t._v(" "+t._s(e.title)+" ")]),a("button",{staticClass:"field-settings",on:{click:t.deleteField}},[a("i",{staticClass:"fa fa-trash"})]),"long_text"==e.field_type?a("textarea",{staticClass:"field-input",domProps:{value:e.data},on:{blur:t.updateFieldInput}}):a("input",{staticClass:"field-input",domProps:{value:e.data},on:{blur:t.updateFieldInput}})])})),1)])},w=[],N=(a("4de4"),a("a630"),a("ac1f"),a("3ca3"),a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"field",attrs:{draggable:""},on:{dragstart:function(e){return t.startDrag(e,t.field)}}},[t._t("default")],2)}),S=[],F={props:{field:Object},methods:{startDrag:function(t,e){t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("field_id",JSON.stringify(e))}}},k=F,L=Object(P["a"])(k,N,S,!1,null,null,null),$=L.exports,j={props:["fields","board_id"],components:{Field:$},computed:{fieldsArray:function(){var t=this.$props.board_id;return Array.from(this.$props.fields).filter((function(e){return e.column_id==t}))}},methods:{onDrop:function(t,e){var a=t.dataTransfer.getData("field_id"),n=JSON.parse(a),r=n.field_type,s=n.data,i=this.$props.fields.length+1,o={column_id:e,data:s,field_type:r,id:i,title:r.replace("_"," ")};console.log("Persona fields: ",this.$props.fields,"  has been updated with",o),this.$store.dispatch("addField",o)},deleteField:function(t){var e={id:t.target.parentNode.parentNode.id};this.$store.dispatch("deleteField",e)},updateFieldInput:function(t){var e={id:t.target.parentNode.id,data:t.target.value};this.$store.dispatch("updateFieldData",e)}}},U=j,M=(a("8ffe"),Object(P["a"])(U,x,w,!1,null,"fec2b628",null)),R=M.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"draggable-elements"},[t._m(0),a("div",{staticClass:"elements-body"},[a("h2",[t._v("Add element to persona")]),t._m(1),a("div",{staticClass:"draggable-cards"},t._l(t.fields,(function(e){return a("div",{key:e.field_type,staticClass:"field",attrs:{draggable:""},on:{dragstart:function(a){return t.startDrag(a,e)}}},[""!==e.icon?a("div",{staticClass:"field-icon"},[a("i",{class:e.icon})]):a("div",{class:e.field_type+" field-text"},[t._v(" "+t._s(e.text)+" ")]),a("div",{staticClass:"field-type"},[t._v(t._s(t.stripFieldType(e.field_type)))])])})),0)])])},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elements-header"},[a("span",{staticClass:"add-element"},[t._v("Add element")]),a("button",{staticClass:"close-elements"},[a("i",{staticClass:"fas fa-times"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elements-body-text"},[a("p",[t._v(" Click or drag and drop one of the element types below to add it to the persona. ")]),a("p",[t._v(" Click on the "),a("i",{staticClass:"fas fa-cog"}),t._v(" icon of each element to edit its settings. ")]),a("p",[t._v("You can reorder the elements by dragging them.")])])}],H={data:function(){return{fields:[{field_type:"short_text",text:"Abc",data:"My short",icon:""},{field_type:"long_text",text:"Lorem Ipsum is simply dummy text of the printing and typesetting industry.",icon:""},{field_type:"image",text:"",icon:"fas fa-image"},{field_type:"Image gallery",text:"",icon:"fas fa-images"},{field_type:"number",text:"123",icon:""}]}},methods:{startDrag:function(t,e){t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("field_id",JSON.stringify(e))},stripFieldType:function(t){return t.replace("_"," ")}}},q=H,V=(a("c299"),Object(P["a"])(q,J,B,!1,null,null,null)),z=V.exports,Y={props:["profileData"],components:{Board:R,Elements:z},data:function(){return{tempValue:null}},created:function(){this.tempValue=this.$props.profileData.details.initials},methods:{onEditName:function(t){D(t)}}},G=Y,K=(a("4a82"),Object(P["a"])(G,O,I,!1,null,"221e1b40",null)),Q=K.exports,W={name:"App",components:{Toolbar:T,Persona:Q},computed:Object(i["a"])({},Object(c["b"])(["profileData"])),mounted:function(){this.$store.dispatch("getPersonaData")}},X=W,Z=(a("5c0b"),Object(P["a"])(X,r,s,!1,null,null,null)),tt=Z.exports;n["a"].config.productionTip=!1,n["a"].use(c["a"]),new n["a"]({store:y,render:function(t){return t(tt)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),r=a.n(n);r.a},6807:function(t,e,a){"use strict";var n=a("f298"),r=a.n(n);r.a},"8ffe":function(t,e,a){"use strict";var n=a("4c29"),r=a.n(n);r.a},"9c0c":function(t,e,a){},c299:function(t,e,a){"use strict";var n=a("47c4"),r=a.n(n);r.a},d26a:function(t,e,a){},f298:function(t,e,a){}});
//# sourceMappingURL=app.c8242586.js.map